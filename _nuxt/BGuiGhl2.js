import{W as A,r as l,_ as S,Q as x,C as b,f as T,p as C,o as P,c as k,v as R,x as V,a as r,S as B,z as H}from"./B-YT2MGI.js";import{u as I}from"./B1ewgIlZ.js";const E=A("captchaStore",()=>{const c=l(!1);function h(i,u){return i===u?c.value=!0:c.value=!1,c.value}return{isValid:c,verifyCaptcha:h}}),D={key:0,class:"captcha-container"},N={class:"captcha-box"},U={id:"captchaCanvas",ref:"captcha-canvas",width:"125",height:"30"},W={__name:"Captcha",setup(c){const h=x("captcha-canvas"),i=E(),u=I(),o=l(""),n=l(""),g=l(""),d=l(!1);function f(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";o.value="";for(let t=0;t<6;t++)o.value+=e.charAt(Math.floor(Math.random()*e.length));y()}function _(){const e=window.speechSynthesis;if(!e){alert("Audio CAPTCHA is not supported in this browser.");return}const t=new SpeechSynthesisUtterance(o.value);t.rate=.8,e.speak(t)}function v(){const e="0123456789ABCDEF";let t="#";for(let s=0;s<6;s++)t+=e[Math.floor(Math.random()*16)];return t}function y(){const e=h.value,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#e8f4fc",t.fillRect(0,0,e.width,e.height),t.font="20px Arial",t.fillStyle="#333";const s=5,M=21;for(let a=0;a<o.value.length;a++){const p=Math.random()*.2-.1;t.save(),t.translate(s+a*20,M),t.rotate(p),t.fillText(o.value[a],0,0),t.restore()}for(let a=0;a<3;a++)t.strokeStyle=v(),t.lineWidth=Math.random()*2+1,t.beginPath(),t.moveTo(Math.random()*e.width,Math.random()*e.height),t.lineTo(Math.random()*e.width,Math.random()*e.height),t.stroke();for(let a=0;a<30;a++){t.fillStyle=v();const p=Math.random()*e.width,w=Math.random()*e.height;t.beginPath(),t.arc(p,w,Math.random()*2+1,0,Math.PI*2),t.fill()}}b(()=>{f()});const m=()=>{f(),g.value="",n.value=""};return T(n,(e,t)=>{n.value.length===o.value.length&&(d.value=i.verifyCaptcha(n.value,o.value),d.value||(u.showAlert(5e3,"Incorrect CAPTCHA. Please try again.","message-danger"),m()))}),(e,t)=>C(d)?H("",!0):(P(),k("div",D,[R(r("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>B(n)?n.value=s:null),type:"text",placeholder:"Enter CAPTCHA",required:""},null,512),[[V,C(n)]]),r("div",N,[r("canvas",U,null,512),r("button",{onClick:m,type:"button",title:"Refresh CAPTCHA",class:"captcha-refresh-btn"}," â†» "),r("button",{onClick:_,type:"button",title:"Play Audio",class:"captcha-play-audio-btn"}," ðŸ”Š ")])]))}},F=S(W,[["__scopeId","data-v-a31abe3f"]]);export{F as _,E as u};
