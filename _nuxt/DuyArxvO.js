const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./hjvjVbqU.js","./B-YT2MGI.js","./DJQvhcLS.js"])))=>i.map(i=>d[i]);
import{a5 as N,ai as g,r as S,aj as O,ak as T,al as B,am as I,f as R,an as E,ao as j,p as L,l as M,ap as F,ah as H,M as U}from"./B-YT2MGI.js";import{d as W}from"./DJQvhcLS.js";const q=a=>a==="defer"||a===!1;function te(...a){var $;const r=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(r);let[t,s,n={}]=a;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=N(),i=s,c=()=>g.value,f=()=>e.isHydrating?e.payload.data[t]:e.static.data[t];n.server=n.server??!0,n.default=n.default??c,n.getCachedData=n.getCachedData??f,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0,n.deep=n.deep??g.deep,n.dedupe=n.dedupe??"cancel";const m=n.getCachedData(t,e),D=m!=null;if(!e._asyncData[t]||!n.immediate){($=e.payload._errors)[t]??($[t]=g.errorValue);const u=n.deep?S:O;e._asyncData[t]={data:u(D?m:n.default()),pending:S(!D),error:T(e.payload._errors,t),status:S("idle"),_default:n.default}}const o={...e._asyncData[t]};delete o._default,o.refresh=o.execute=(u={})=>{if(e._asyncDataPromises[t]){if(q(u.dedupe??n.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(u._initial||e.isHydrating&&u._initial!==!1){const h=u._initial?m:n.getCachedData(t,e);if(h!=null)return Promise.resolve(h)}o.pending.value=!0,o.status.value="pending";const p=new Promise((h,l)=>{try{h(i(e))}catch(b){l(b)}}).then(async h=>{if(p.cancelled)return e._asyncDataPromises[t];let l=h;n.transform&&(l=await n.transform(h)),n.pick&&(l=x(l,n.pick)),e.payload.data[t]=l,o.data.value=l,o.error.value=g.errorValue,o.status.value="success"}).catch(h=>{if(p.cancelled)return e._asyncDataPromises[t];o.error.value=j(h),o.data.value=L(n.default()),o.status.value="error"}).finally(()=>{p.cancelled||(o.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=p,e._asyncDataPromises[t]},o.clear=()=>V(e,t);const y=()=>o.refresh({_initial:!0}),_=n.server!==!1&&e.payload.serverRendered;{const u=M();if(u&&_&&n.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const l=u._nuxtOnBeforeMountCbs;B(()=>{l.forEach(b=>{b()}),l.splice(0,l.length)}),I(()=>l.splice(0,l.length))}_&&e.isHydrating&&(o.error.value||m!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):u&&(e.payload.serverRendered&&e.isHydrating||n.lazy)&&n.immediate?u._nuxtOnBeforeMountCbs.push(y):n.immediate&&y();const p=F();if(n.watch){const l=R(n.watch,()=>o.refresh());p&&E(l)}const h=e.hook("app:data:refresh",async l=>{(!l||l.includes(t))&&await o.refresh()});p&&E(h)}const d=Promise.resolve(e._asyncDataPromises[t]).then(()=>o);return Object.assign(d,o),d}function V(a,r){r in a.payload.data&&(a.payload.data[r]=void 0),r in a.payload._errors&&(a.payload._errors[r]=g.errorValue),a._asyncData[r]&&(a._asyncData[r].data.value=void 0,a._asyncData[r].error.value=g.errorValue,a._asyncData[r].pending.value=!1,a._asyncData[r].status.value="idle"),r in a._asyncDataPromises&&(a._asyncDataPromises[r]&&(a._asyncDataPromises[r].cancelled=!0),a._asyncDataPromises[r]=void 0)}function x(a,r){const t={};for(const s of r)t[s]=a[s];return t}const ne={blog:"vK3Oll9HM6"},A={blog:"_content_blog",info:"_content_info"},ae={blog:{jsonFields:["meta","seo","body","navigation","tags"]},info:{jsonFields:[]}},v=(a,r)=>{const t=a._conditions;return t.length>0?`(${t.join(` ${r} `)})`:""},w=a=>{const r=[],t={_conditions:r,where(s,n,e){let i;switch(n.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(e)){const c=e.map(f=>`'${f}'`).join(", ");i=`"${String(s)}" ${n.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${n} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(e)&&e.length===2)i=`"${String(s)}" ${n.toUpperCase()} '${e[0]}' AND '${e[1]}'`;else throw new Error(`Value for ${n} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(s)}" ${n.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(s)}" ${n.toUpperCase()} '${e}'`;break;default:i=`"${String(s)}" ${n} '${e}'`}return r.push(`${i}`),t},andWhere(s){const n=s(w());return r.push(v(n,"AND")),t},orWhere(s){const n=s(w());return r.push(v(n,"OR")),t}};return t},K=(a,r)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},s={andWhere(e){const i=e(w());return t.conditions.push(v(i,"AND")),s},orWhere(e){const i=e(w());return t.conditions.push(v(i,"OR")),s},path(e){return s.where("path","=",H(e))},skip(e){return t.offset=e,s},where(e,i,c){return s.andWhere(f=>f.where(String(e),i,c)),s},limit(e){return t.limit=e,s},select(...e){return e.length&&t.selectedFields.push(...e),s},order(e,i){return t.orderBy.push(`"${String(e)}" ${i}`),s},async all(){return r(a,n()).then(e=>e||[])},async first(){return r(a,n({limit:1})).then(e=>e[0]||null)},async count(e="*",i=!1){return r(a,n({count:{field:String(e),distinct:i}})).then(c=>c[0].count)}};function n(e={}){let i="SELECT ";if(e!=null&&e.count)i+=`COUNT(${e.count.distinct?"DISTINCT":""} ${e.count.field}) as count`;else{const f=Array.from(new Set(t.selectedFields));i+=f.length>0?f.map(m=>`"${String(m)}"`).join(", "):"*"}i+=` FROM ${A[String(a)]}`,t.conditions.length>0&&(i+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?i+=` ORDER BY ${t.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const c=(e==null?void 0:e.limit)||t.limit;return c>0&&(t.offset>0?i+=` LIMIT ${c} OFFSET ${t.offset}`:i+=` LIMIT ${c}`),i}return s};function Q(){const a=[{name:"start",time:performance.now()}];return{tick(r){a.push({name:r,time:performance.now()})},end(r){const t=a.reduce((s,n,e)=>(e>0&&s.push(`-- ${n.name}: ${(n.time-a[e-1].time).toPrecision(4)}ms
`),s),[]);return`${r}: ${(a[a.length-1].time-a[0].time).toPrecision(4)}ms
${t.join("")}`}}}const P=/^h([1-6])$/,z=a=>P.test(a);async function G(a,r){const{ignoredTags:t=[]}={};return(await a.where("extension","=","md").select("path","body","description","title").all()).flatMap(n=>Y(n,{ignoredTags:t}))}function Y(a,{ignoredTags:r}){var f,m,D,o;const t=!a.body||((f=a.body)==null?void 0:f.type)==="root"?a.body:W(a.body),s=a.path??"",n=[{id:s,title:a.title||"",titles:[],content:(a.description||"").trim(),level:1}];if(!(t!=null&&t.children))return n;let e=1,i=0;const c=[a.title??""];for(const y of t.children){const _=y.tag||"";if(z(_)){const d=Number(((m=_.match(P))==null?void 0:m[1])??0),$=C(y).trim();d===1?c.splice(0,c.length):d<i?c.splice(d-1,c.length-1):d===i&&c.pop(),n.push({id:`${s}#${(D=y.props)==null?void 0:D.id}`,title:$,titles:[...c],content:"",level:d}),c.push($),i=d,e+=1}else{const d=C(y,r).trim();if(e===1&&((o=n[e-1])==null?void 0:o.content)===d)continue;n[e-1].content=`${n[e-1].content} ${d}`.trim()}}return n}function C(a,r=[]){var s;let t="";return a.type==="text"&&(t+=a.value||""),r.includes(a.tag??"")?"":((s=a.children)!=null&&s.length&&(t+=a.children.map(n=>C(n,r)).filter(Boolean).join("")),t)}const k=a=>K(a,(r,t)=>J(r,t));async function re(a,r){return G(k(a))}async function J(a,r){return X(a,r)}async function X(a,r){const t=Q(),s=await U(()=>import("./hjvjVbqU.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(n=>n.loadDatabaseAdapter(a)).then(n=>n.all(r));return t.tick("Execute Query"),console.log(t.end("Run with Compressed Dump")),s}export{re as a,ae as b,ne as c,Q as m,k as q,A as t,te as u};
